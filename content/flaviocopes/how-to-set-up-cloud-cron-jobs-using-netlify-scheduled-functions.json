{
  "title": "How to set up \"cloud cron jobs\" using Netlify Scheduled Functions",
  "url": "https://flaviocopes.com/netlify-cloud-cron-jobs/",
  "date": "Thu, 28 Apr 2022 07:00:00 +0200",
  "content": "        <p>Netlify Scheduled Functions allow us to do some interesting things.</p><p>Here&rsquo;s how to set them up.</p><p>Create a <a href=\"https://flaviocopes.com/netlify-functions/\">serverless function</a> in <code>netlify/functions</code> in your repository, for example <code>test.js</code>:</p><blockquote><p><code>netlify/functions/test.js</code></p></blockquote><div class=\"highlight\"><pre tabindex=\"0\" ><code class=\"language-js\" data-lang=\"js\"><span >exports</span>.<span >handler</span> <span >=</span> (<span >event</span>, <span >context</span>) =&gt; {  <span >//do something</span><span ></span>  <span >return</span> { <span >statusCode</span><span >:</span> <span >200</span> }}</code></pre></div><p>Then in <code>netlify.toml</code> (create this file if you don&rsquo;t have it yet) configure how frequently you want this Netlify Scheduled Function to run:</p><pre tabindex=\"0\"><code>[functions.&#34;test&#34;]schedule = &#34;@hourly&#34;</code></pre><p>Alternatively you can set this in the function itself, with no need for this entry:</p><div class=\"highlight\"><pre tabindex=\"0\" ><code class=\"language-js\" data-lang=\"js\"><span >const</span> <span >handler</span> <span >=</span> (<span >event</span>, <span >context</span>) =&gt; {  <span >//do something</span><span ></span>  <span >return</span> { <span >statusCode</span><span >:</span> <span >200</span> }}<span >exports</span>.<span >handler</span> <span >=</span> <span >schedule</span>(<span >&#39;@hourly&#39;</span>, <span >handler</span>)</code></pre></div><p><code>@hourly</code> runs every hour at minute 0<code>@daily</code> runs every day at 00:00<code>@weekly</code> runs every Sunday at 00:00</p><p><code>@monthly</code> and <code>@yearly</code> are available too.</p><p>You can also use a cron expression, like <code>5 4 * * *</code> or any other expression (<a href=\"https://crontab.guru\">crontab guru</a> is your friend)</p><p>You can also invoke a function manually using <code>netlify functions:invoke test</code> where <code>test</code> is the name of the function.</p><p>You can use Netlify Scheduled Functions for many different use cases.</p><p>I set a Netlify Scheduled Function to auto-deploy the repository every day to post a schedule blog post, for which I set the publishing date in advance.</p><p>I use the <a href=\"https://flaviocopes.com/fetch-api/\">Fetch API</a> to call the deploy webhook so I can do <a href=\"https://flaviocopes.com/netlify-auto-deploy/\">automatic deploys on Netlify</a>.</p>      ",
  "image": "https://flaviocopes.com/netlify-cloud-cron-jobs/banner.png",
  "description": "Find out how to set up Netlify Scheduled Functions",
  "publisher": "Flaviocopes",
  "publisherUrl": "https://flaviocopes.com/"
}